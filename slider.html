<!-- Start of slider code -->
<script>
    var currentIndex = 0;
    var newIndex = null;

    var initialX, initialY, initialTime;

    var slideElements = document.getElementsByClassName("slider__slide");
    var slidesLength = slideElements.length;
    var paginationElement = document.getElementsByClassName("slider__pag")[0];
    var sliderNavElement = document.getElementsByClassName("slider__nav")[0];
    var sliderNavElements = document.getElementsByClassName("slider__nav__btn");

    var autoplay = true;
    var autoplayInterval = 8000;
    var autoplayTimer = null;

    function navigateSlider() {
        if (autoplay) {
            clearInterval(autoplayTimer);
            autoplayTimer = setInterval(function() {
                newIndex++;
                navigateSlider();
            }, autoplayInterval);
        }

        // Handle navigation from first slide
        if (newIndex === -1) {
            newIndex = slidesLength - 1;
        }

        // Handle navigation from last slide
        else if (newIndex === slidesLength) {
            newIndex = 0;
        }

        // Make the pagination button of the active slider active
        paginationElement.childNodes[currentIndex].querySelector('.slider__pag__btn').classList.remove('slider__pag__btn--active');
        paginationElement.childNodes[newIndex].querySelector('.slider__pag__btn').classList.add('slider__pag__btn--active');

        // Navigate to the correct slide
        slideElements[currentIndex].style.display = "none";
        slideElements[newIndex].style.display = "block";
        currentIndex = newIndex;

        // Scroll the active pagination button into view
        var paginationActiveElement = document.getElementsByClassName("slider__pag__btn--active")[0];
        paginationActiveElement.parentElement.scrollIntoView({behavior: "smooth", inline: "center"});
    }

    // Navigate slider by swiping on touch screens
    sliderNavElement.addEventListener('touchstart', function(e) {
        initialX = e.touches[0].clientX;
        initialY = e.touches[0].clientY;
        initialTime = new Date();
    });

    sliderNavElement.addEventListener('touchend', function(e) {
        var deltaX = e.changedTouches[0].clientX - initialX;
        var deltaY = e.changedTouches[0].clientY - initialY;
        var deltaTime = new Date() - initialTime;

        if (deltaTime < 400 && deltaY < 150) {
            if (deltaX > 40) {
                // Swipe-right gesture.
                newIndex--;
                navigateSlider();
            }
            else if (deltaX < -40) {
                // Swipe-left gesture.
                newIndex++;
                navigateSlider();
            }
        }
    });

    // Navigate slider by clicking the navigation buttons
    sliderNavElements[0].addEventListener('click', function() {
        newIndex--;
        navigateSlider();
    });

    sliderNavElements[1].addEventListener('click', function() {
        newIndex++;
        navigateSlider();
    });

    // Navigate slider by clicking the pagination buttons
    paginationElement.addEventListener('click', function(e) {
        var target = e.target.closest(".slider__pag__btn");
        if (!target) return;
        if (target.classList.contains("slider__pag__btn")) {
            newIndex = Number(target.getAttribute("aria-posinset"));
            navigateSlider();
        }
    });

    // Navigate the slider automatically
    if (autoplay) {
        autoplayTimer = setInterval(function() {
            newIndex++;
            navigateSlider();
        }, autoplayInterval);
    }

    // Set horizontal scroll for the slider pagination container
    paginationElement.addEventListener('wheel', (e) => {
        e.preventDefault();
        paginationElement.scrollLeft += e.deltaY;
        paginationElement.scrollLeft += e.deltaX;
    });
</script>